## Підсумок
На цьому етапі тестувальник перевіряє, чи правильно програма вказує браузеру не зберігати конфіденційні дані.

Браузери можуть зберігати інформацію для цілей кешування та історії. Кешування використовується для підвищення продуктивності, щоб раніше відображену інформацію не потрібно було завантажувати знову. Механізми історії використовуються для зручності користувача, щоб користувач міг бачити саме те, що він бачив у момент отримання ресурсу. Якщо користувачеві відображається конфіденційна інформація (наприклад, його адреса, дані кредитної картки, номер соціального страхування або ім'я користувача), то ця інформація може зберігатися в кеші або історії, а отже, її можна отримати, переглянувши кеш браузера або просто натиснувши кнопку "Назад" браузера.

## Цілі тестування
- Перевірити, чи зберігає додаток конфіденційну інформацію на стороні клієнта.
- Перевірити, чи можливий доступ без авторизації.

## Як перевірити
## Історія браузера
Технічно, кнопка "**Назад**" - це історія, а не кеш (див. Кешування в HTTP: списки історії). Кеш і історія - це дві різні сутності. Однак вони мають однаковий недолік - представлення раніше відображеної конфіденційної інформації.

Перший і найпростіший тест полягає у введенні конфіденційної інформації в додаток і виході з нього. Потім тестувальник натискає кнопку "**Назад**" у браузері, щоб перевірити, чи можна отримати доступ до раніше відображеної конфіденційної інформації без автентифікації.

Якщо після натискання кнопки "**Назад**" тестувальник може отримати доступ до попередніх сторінок, але не може отримати доступ до нових, то це не проблема аутентифікації, а проблема з історією браузера. Якщо ці сторінки містять конфіденційні дані, це означає, що програма не забороняла браузеру їх зберігати.

Аутентифікація не обов'язково повинна бути задіяна в тестуванні. Наприклад, коли користувач вводить свою електронну адресу, щоб підписатися на розсилку новин, ця інформація може бути отримана, якщо її не обробляти належним чином.

Кнопка "**Назад**" може не показувати конфіденційні дані. Це можна зробити наступним чином:

- Доставляючи сторінку через HTTPS.
- Встановлення параметра _Cache-Control: must-revalidate_

## Кеш браузера
Тут тестувальники перевіряють, чи не витікають конфіденційні дані в кеш браузера. Для цього вони можуть використовувати проксі-сервер (наприклад, OWASP ZAP) і переглядати відповіді сервера, що належать до сесії, перевіряючи, чи для кожної сторінки, яка містить конфіденційну інформацію, сервер дав браузеру вказівку не кешувати дані.Така вказівка може бути видана в заголовках HTTP-відповіді за допомогою наступних директив:

- _Cache-Control: no-cache, no-store_
- _Expires: 0_
- _Pragma: no-cache_

Ці директиви, як правило, надійні, хоча можуть знадобитися додаткові прапори для заголовка _Cache-Control_, щоб краще запобігати постійним зв'язаним файлам у файловій системі. До них відносяться:

- _Cache-Control: must-revalidate, max-age=0, s-maxage=0_

```markdown
HTTP/1.1:
Cache-Control: no-cache
```

```
HTTP/1.0:
Pragma: no-cache
Expires: "past date or illegal value (e.g., 0)"
```

Наприклад, якщо тестувальники тестують додаток для електронної комерції, вони повинні знайти всі сторінки, які містять номер кредитної картки або іншу фінансову інформацію, і перевірити, чи всі ці сторінки виконують директиву не кешувати. Якщо вони знайдуть сторінки, які містять важливу інформацію, але не дають браузеру вказівки не кешувати їхній вміст, вони знатимуть, що конфіденційна інформація зберігатиметься на диску, і зможуть перевірити це ще раз, просто знайшовши сторінку в кеші браузера.

Точне місце, де зберігається ця інформація, залежить від операційної системи клієнта і браузера, який використовується. Ось кілька прикладів:

- Mozilla Firefox:
- - Unix/Linux: ~/.cache/mozilla/firefox/
- - Windows: C:\Users\<user_name>\AppData\Local\Mozilla\Firefox\Profiles\<profile-id>\Cache2\
- Internet Explorer:
- - C:\Users\<user_name>\AppData\Local\Microsoft\Windows\INetCache\
- Chrome:
- - Windows: C:\Users\<user_name>\AppData\Local\Google\Chrome\User Data\Default\Cache
- - Unix/Linux: ~/.cache/google-chrome

## Перегляд кешованої інформації
Firefox надає функціональність для перегляду кешованої інформації, яка може бути корисною для вас як тестувальника. Звичайно, індустрія також створила різноманітні розширення та зовнішні додатки, які можуть вам сподобатися або знадобитися для Chrome, Internet Explorer або Edge.

Інформація про кеш також доступна через інструменти для розробників у більшості сучасних браузерів, таких як Firefox, Chrome та Edge. У Firefox також можна скористатися URL-адресою **about:cache**, щоб перевірити дані про кеш.

## Обробка перевірки для мобільних браузерів
Обробка директив кешу в мобільних браузерах може бути зовсім іншою. Тому тестувальники повинні починати новий сеанс перегляду з чистим кешем і скористатися такими функціями, як Режим пристрою в Chrome або Режим адаптивного дизайну в Firefox, щоб повторно протестувати або окремо протестувати концепції, описані вище.

Крім того, персональні проксі-сервери, такі як ZAP і Burp Suite, дозволяють тестувальнику вказати, якого користувача-агента повинні надсилати його павуки/краулери. Його можна встановити на відповідність рядку **User-Agent** мобільного браузера і використовувати для того, щоб побачити, які директиви кешування надсилає програма, що тестується.

## Тестування сірої скриньки
Методологія тестування еквівалентна тестуванню з використанням чорної скриньки, оскільки в обох сценаріях тестувальники мають повний доступ до заголовків відповідей сервера та HTML-коду. Однак при тестуванні за допомогою сірої скриньки тестувальник може мати доступ до облікових даних облікового запису, що дозволить йому тестувати конфіденційні сторінки, доступні лише для авторизованих користувачів.